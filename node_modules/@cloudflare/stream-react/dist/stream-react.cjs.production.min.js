"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),o=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,r="https://embed.cloudflarestream.com/embed/sdk.latest.js",n=function(){if("undefined"!=typeof window)return window.Stream};function a(){var e=t.useState(n),o=e[0],a=e[1];return t.useEffect((function(){if(!o){var e=document.querySelector("script[src='"+r+"']"),t=null!=e?e:document.createElement("script");t.addEventListener("load",(function(){a(n)})),e||(t.src=r,document.head.appendChild(t))}}),[o]),o}function i(e,o,r){t.useEffect((function(){o.current&&void 0!==r&&(o.current[e]=r)}),[e,r,o])}function d(e,o,r){void 0===r&&(r=l),t.useEffect((function(){if(o.current){var t=o.current;return t.addEventListener(e,r),function(){return t.removeEventListener(e,r)}}}),[r,e,o])}var l=function(){},u={position:"absolute",top:0,left:0,right:0,bottom:0,height:"100%",width:"100%"},s=function(e){var r=e.children,n=e.responsive,a=e.className,i=e.videoDimensions,d=i.videoHeight,l=i.videoWidth,u=t.useMemo((function(){return{position:"relative",paddingTop:l>0?d/l*100+"%":void 0}}),[l,d]);return o.createElement("div",{className:a,style:n?u:void 0},r)},c=function(e){var r=e.src,a=e.customerCode,l=e.adUrl,c=e.controls,m=void 0!==c&&c,p=e.muted,f=void 0!==p&&p,v=e.autoplay,h=void 0!==v&&v,y=e.loop,g=void 0!==y&&y,C=e.preload,T=void 0===C?"metadata":C,S=e.primaryColor,b=e.letterboxColor,E=e.defaultTextTrack,R=e.height,x=e.width,k=e.poster,w=e.currentTime,U=e.volume,W=void 0===U?1:U,L=e.playbackRate,P=void 0===L?1:L,D=e.startTime,H=e.streamRef,j=e.responsive,I=void 0===j||j,A=e.className,M=e.title,N=e.onAbort,q=e.onCanPlay,z=e.onCanPlayThrough,B=e.onDurationChange,O=e.onEnded,_=e.onError,F=e.onLoadedData,K=e.onLoadedMetaData,V=e.onLoadStart,G=e.onPause,J=e.onPlay,Q=e.onPlaying,X=e.onProgress,Y=e.onRateChange,Z=e.onResize,$=e.onSeeked,ee=e.onSeeking,te=e.onStalled,oe=e.onSuspend,re=e.onTimeUpdate,ne=e.onVolumeChange,ae=e.onWaiting,ie=e.onStreamAdStart,de=e.onStreamAdEnd,le=e.onStreamAdTimeout,ue=t.useRef(),se=null!=H?H:ue,ce=t.useState({videoHeight:0,videoWidth:0}),me=ce[0],pe=ce[1],fe=t.useRef(null),ve=function(e,o){var r=o.muted,n=o.preload,a=o.loop,i=o.autoplay,d=o.controls,l=o.poster,u=o.primaryColor,s=o.letterboxColor,c=o.adUrl,m=o.startTime,p=o.defaultTextTrack,f=o.customerCode,v=[l&&"poster="+encodeURIComponent(l),c&&"ad-url="+encodeURIComponent(c),p&&"defaultTextTrack="+encodeURIComponent(p),u&&"primaryColor="+encodeURIComponent(u),s&&"letterboxColor="+encodeURIComponent(s),m&&"startTime="+m,r&&"muted=true",n&&"preload="+n,a&&"loop=true",i&&"autoplay=true",!d&&"controls=false"].filter(Boolean).join("&");return t.useMemo((function(){return f?"https://customer-"+f+".cloudflarestream.com/"+e+"/iframe?"+v:"https://iframe.cloudflarestream.com/"+e+"?"+v}),[])}(r,{customerCode:a,muted:f,preload:T,loop:g,autoplay:h,controls:m,poster:k,primaryColor:S,letterboxColor:b,adUrl:l,defaultTextTrack:E,startTime:D}),he=function(e){try{var t=new URL(e);return t.hostname.endsWith("videodelivery.net")||t.hostname.endsWith("cloudflarestream.com")}catch(e){return!1}}(r)?r:ve;return i("muted",se,f),i("controls",se,m),i("src",se,r),i("autoplay",se,h),i("currentTime",se,w),i("loop",se,g),i("preload",se,T),i("primaryColor",se,S),i("letterboxColor",se,b),i("volume",se,W),i("playbackRate",se,P),t.useEffect((function(){var e=n();if(fe.current&&e){var t=e(fe.current);se.current=t;var o=t.videoHeight,r=t.videoWidth;o&&r&&pe({videoHeight:o,videoWidth:r})}}),[]),d("abort",se,N),d("canplay",se,q),d("canplaythrough",se,z),d("durationchange",se,B),d("ended",se,O),d("error",se,_),d("loadeddata",se,F),d("loadedmetadata",se,K),d("loadstart",se,V),d("pause",se,G),d("play",se,J),d("playing",se,Q),d("progress",se,X),d("ratechange",se,Y),d("seeked",se,$),d("seeking",se,ee),d("stalled",se,te),d("suspend",se,oe),d("timeupdate",se,re),d("volumechange",se,ne),d("waiting",se,ae),d("stream-adstart",se,ie),d("stream-adend",se,de),d("stream-adtimeout",se,le),d("resize",se,(function(e){if(se.current){var t=se.current;pe({videoHeight:t.videoHeight,videoWidth:t.videoWidth}),Z&&Z(e)}})),o.createElement(s,{className:A,responsive:I,videoDimensions:me},o.createElement("iframe",{ref:fe,src:he,title:M,style:I?u:void 0,frameBorder:0,height:R,width:x,allow:"accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;",allowFullScreen:!0}))};exports.Stream=function(e){return a()?o.createElement(c,Object.assign({},e)):null},exports.useStreamSDK=a;
//# sourceMappingURL=stream-react.cjs.production.min.js.map
